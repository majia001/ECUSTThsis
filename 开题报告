基于Hadoop的生产管理系统

计093（10093619）陈逢隽

生产管理系统，生产管理系统，ERP，Hadoop

研究背景

国内外现状

ERP，即企业资源计划（enteprice resource planning，ERP），由美国加特纳（GartnerGroup.Inc）公司在90年代初首先提出，其目的是使企业更有效地运作，有效利用和管理整体资源，优化企业工作流程。它利用计算机技术，把企业的物流、人流、资金流、信息流统一起来进行管理，把客户需要和企业内部的生产经营活动以及供应商的资源整合在一起，为企业决策层提供解决企业产品成本问题、提高作业效率、及资金的运营情况一系列动作问题，使之成为能完全按用户需求进行经营管理的一种全新的行之有效的管理方法。 换言之，ERP将企业内部所有资源整合在一起，对采购、生产、成本、库存、分销、运输、财务、人力资源进行规划，从而达到最佳资源组合，取得最佳效益。

生产管理控制模块则是ERP系统的核心所在，它将企业的整个生产过程有机的结合在一起，使得企业能够有效的降低库存，提高效率。同时各个原本分散的生产流程的自动链接，也使得生产流程能够前后连贯进行，而不会出现生产脱节，耽误生产交货时间。生产控制管理是一个以计划为导向的先进生产、管理方法。首先，企业确定它的一个总生产计划，再经过系统层层细分后，下达到各部门去执行。即生产部门以此生产，采购部门按此采购等等。主要包含：主生产计划、物料需求计划、能力需求计划、车间控制、制造标准5个主要的子模块。

接下来介绍国内外一些著名的ERP系统厂商、供应商，然后对比分析国内外ERP软件的现状。

说到ERP系统软件，最著名的当属SAP。SAP全称Systems Applications and Products in Data Processing，是目前全世界排名第一的ERP软件，是全球企业管理管理软件与解决方案的技术领袖和市场领导者。SAP是目前全球所有ERP产品中，对企业构架和财务控制考虑得最细致的系统，也是整体控制逻辑和整体系统结构是最严谨的系统可以让企业引进先进的管理理念。对产品在各种行业的适用性考虑得最多，应用的行业最广。且SAP系统拥有最优秀的整体稳定性。SAP软件主要包含了：FI财务会计、TR财务管理、CO管理会计、EC企业控制、IM投资管理、PP生产计划、MM物料管理、PM工厂维护、QM品质管理、PS专案管理、SD销售与分销、HR人力资源管理、开放式咨询仓储13个模块。

排名其次的则是Oracle甲骨文，ERP系统软件行业的第二大巨头。Oracle E——Business Suite是第一套也是唯一搭配单一全球资料库作业的应用软体，连结前後端的整个业务处理流程并使其自动化，提供完善、统合且关键资料的基础，例如各业务、产品和地区的销售业绩、库存量与营收。ORACEL ERP软件更适用于业务复杂、个性化管理的企业。ORACLE软件实施的难度和复杂性，实施成本，风险远低于SAP。主要包含制造、分销和财务是其系统的3大主要模块。

而国内方面，比较著名的则是ERP厂商则是金蝶和用友。它们结合中国的实际情况和环境，为中国的企业量身打造了符合“中国管理模式”的ERP系统软件。金蝶的主要客户群体为中小企业，在中小企业中占有极高的占有率。其主要产品有：
金蝶EAS，是集团企业的一体化全面管控解决方案，适用于资本管控型、战略管控型及运营管控型的集团企业。
金蝶K/3，是为中小型企业量身定制的企业管理软件。
金蝶KIS，金蝶KIS是面向小型企业的管理信息化解决方案。

用友成立于1988年，是亚太本土最大的管理软件、ERP软件、集团管理软件、人力资源管理软件、客户关系管理软件、小型企业管理软件、财政及行政事业单位管理软件、汽车行业管理软件、烟草行业管理软件、内部审计软件及服务提供商，也是中国领先的企业云服务、医疗卫生信息化、管理咨询及管理信息化人才培训提供商。比较知名的软件产品是用友ERP-U8财务软件，包括总账、应收款管理、应付款管理、固定资产、UFO报表、网上银行、票据通、现金流量、网上报销、报账中心、公司对账、财务分析、现金流量表、所得税申报等。这些应用从不同的角度，帮助企业轻松实现从核算到报表分析的全过程管理。

总体来说，SAP和Oracle毫无疑问是ERP系统软件行业的两大巨头，甚至是处于垄断地位。其产品功能全面、适用范围广，涵盖了企业生产管理的方方面面，并相应针对不同行业提出了不统行业的解决方案，是国际上使用最为广泛的ERP系统软件。当然其功能也非常复杂，其中的个别模块也还需要根据不同行业、不同公司进行二次开发和定制。并且其价格、投入使用成本也是十分高昂，目前国内的中小企业难以承受这样的价格，这也给了像金蝶、用友这样的国内ERP生存和发展的空间。国内的ERP软件厂商，在总体上当然无法同SAP和Oracle相提并论，甚至有相当悬殊的差距。但这如前面说所，目前国内的大多数中小企业，由于投入成本过高的原因，无法采用SAP或是ERP系统软件，但这些企业也需要生产管理的信息化、集成，所以他们可以选这像金蝶、用友这样的适用于中小企业的ERP软件，而国内的ERP软件厂商也把中小企业作为它们的主要用户。而且相对于SAP和Oracle这样的国际ERP系统软件，本土的ERP系统软件可能更加符合中国企业的实际发展情况和需要，更加了解中国的企业发展状况，国际ERP厂商还要经历一个本土化的过程，毕竟中国和西方欧美的管理生产模式还是有很大的不同的。且国内ERP软件虽然不像SAP、Oracle这样面面俱到，但在特定领域、细分市场上都有自己的优势，甚至有领先地位，比如用友的U8财务软件就受到国内中小企业的青睐。但是国内的ERP软件想要达到SAP和Oracle这样的水平和规模，仍有很长的路要走。

研究意义

云计算（cloud computing）是基于互联网的相关服务的增加、使用和交付模式，通常涉及通过互联网来提供动态易扩展且经常是虚拟化的资源。目前，云计算还是主要运用于互联网网行业中，对互联网、网站的巨大访问量带来的大数据进行并行处理。但我相信云计算作为IT行业未来发展的一种趋势，可能会很大程度的改变IT行业的面貌，而不仅仅是作用于互联网行业。ERP系统软件作为IT行业中的细分行业，自然也不能例外。只有紧跟技术发展的脚步才能把握先机、取得更加重大的发展、占据领先地位。

尤其是在2011年开始，云计算技术去得了重大进展和突破。从加德纳（Gartner）公司2011 年的技术成熟度报告，可以看到云计算现在已经绕过了应用上的瓶颈，开始真正“落地”，从刚开始单纯的只是概念到现在的投入实际领域中的应用。云计算如一阵飓风席卷整个IT 界，伴之而来的优势是非常明显的。2012 年更是云计算快速发展的一年，各种云技术、云方案将陆续出台，各大ERP系统软件厂商也将云计算、云的概念纳入到自己的发展战略中。国际上，SAP巨头斥巨资打造云计算平台，通过云计算将管理软件的功能通过Web服务的方式提供给客户。 客户只需要为自己使用的功能付费，而不必像以往一样购买整套系统，并要在软硬件维护实施上花费巨大成本，并以此来改变自己“超级无聊的企业资源规划软件（ERP）”的形象。国内方面，金蝶提出了“云管理，触手可及”，希望通过运用社交网络、移动互联、云计算等新兴技术所催生的创新型管理模式。通过云计算时代的新兴技术与ERP系统有机融合，形成具有云时代特征的社交化ERP，真正实现让云管理触手可及。

因此，ERP系统软件与云计算的结合将有非常广阔的市场前景和应用空间。本文将结合ERP系统的核心模块——生产管理模块与云计算的一个具体实现方式——Hadoop，来探讨
基于云计算的ERP系统软件的开发及应用。

文献综述

生产管理系统

生产管理控制模块则是ERP系统的核心所在，它将企业的整个生产过程有机的结合在一起，使得企业能够有效的降低库存，提高效率。同时各个原本分散的生产流程的自动链接，也使得生产流程能够前后连贯进行，而不会出现生产脱节，耽误生产交货时间。生产控制管理是一个以计划为导向的先进生产、管理方法。首先，企业确定它的一个总生产计划，再经过系统层层细分后，下达到各部门去执行。即生产部门以此生产，采购部门按此采购等等。

一个好的ERP系统，应该有一个方便的生产管理系统。包括从MRP计划中自动产生制造令，制造令下达后通过齐套分析、占料、备料、领料、退料，生产过程中填报生产日期，进行IPQC检验（制程检验），生产完工后开出入库单或制程转移单，进行FQC检验（成品或半成品的检验），对生产全过程进行监督与控制；对订单实时跟踪；IP（在制品）存量实时控制；直接材料成本实时流转；直接人工，制造费用按工作中心，按制造令分批分步分摊；部门绩效考核有句可依。应用生产管理系统减少WIP存量，降低损耗，控制成本、提高产品质量与客户满意度的目的。本次设计的ERP生产管理系统中主要包括三大模块：计划管理模块、车间管理模块和产品结构管理模块。

计划管理

做什么都需要计划，制造企业的生惨更是如此。企业做出销售预测，或是接到客户订单时，必须快速做出反映。
确定出货产品在哪一个具体时间生产完成的计划叫主生产计划，即MPS；确定出货产品下面的材料或半成品在什么时候购买或生产多少数量的计划叫物料需求计划，即MRP；确定生产产品、半成品需要多少工时能力的计划叫产能计划，即CRP；确定购买物料或外包外发需要多少资金，在计划什么时间需要付款的计划叫资金需求计划，即FRP。各计划之间的关系如图所示。

主生产计划MPS是ERP系统中计划的开始，排定了出货产品的完工日期后才能进行物料需求计划MRP。进行了物料需求计划，企业就知道工作中心在什么时候需要完成多少半成品或成品，据此可计算出完成半成品或成品所需要多少工时，即进行能力需求计划CRP。当能力不足时，可能需外包或外发，或者是重新调整MPS计划。可能某些订单需要提前或推后生产，同样，材料的购买日期也需要调整，资金的需求也随之会发生变化。也可能由于资金不足等原因需推迟订单交货日期等。因此，下面的计划由上面的计划驱动，即MRP、CRP、FRP都由MPS驱动，而MRP、CRP、FRP反过来都会影响MPS计划。

车间管理

车间管理是对成品或半成品的制造过程进行管理，其主要内容包括：

从MRP计划中生成制造令。每个（半）成品都定义了工艺路线，每个工艺路线都指明了制造单位。MRP计划中按此理想状态考虑，而实际的物料可能有多条工艺路线，可以由多个制造单位完成。因此车间管理部门从MRP计划中生成制造令时应按实际情况，平衡各工作中心的产能和负荷、考虑库存材料的状况等，调整制造令的工艺路线或制造单位，让制造令尽可能按计划要求完成。

制造令下达。生产管理部门开好的制造令需下达通知工作中心，让工作中心知道近期的生产任务，完成多少工序，完成工序需要哪些材料，材料发到哪个WIP仓库，完成工序需要的标准工时等。工作中心应管理制造令，直到工序完成。

制造令占料、备料、发料、退料。工作中心完成制造令需耗用材料，从仓库领料，或者是需要仓库发料。领料前先检验仓库是否有未分配量，即进行占料作业；然后让仓库准备材料；材料由仓库发到工作中心的WIP仓库，分配给制造令；发现材料不足时需补料，过剩或材料不良时需退料。

填报生产日报。为了分配直接人工和制造费用到制造令，为了掌握制造令在制造中心的完成情况，为了评估工作中心的生产效率及绩效、为了控制制程品质、工作中心应填报生产日报，报告工作中心的工作日志。

制造令完成入库。（半）成品完成后要入库到仓库，或者转到下一个制造单位，同时计算其消耗了多少材料。在费用分摊时会知道完工入库消耗了多少直接人工和制造费。

产品结构管理

产品结构管理的核心是BOM（Bill of Material）叫做物料清单，也叫产品结构表、物料表等。将产品的原料、零配件、组合件予以拆解，并将各单项物料按物料代号、品名、规格、单位用量、损耗等一制造流程的顺序记录下来，排列为一个清单，这就是物料清单，也就是BOM。BOM是：

MRP的基础。

制造令发料的计算依据。

本质上是一项工程文件，不但是产品的规范说明，而且是制造流程的依据。

用来核算产品成本的基础。

BOM的重要性及其影响范围很大，故其内容必须随时保持正确及时。

在建立产品结构的要点是：

BOM必须能显示制造层次。理想的BOM，不但应能具体显示产品的组成结构，而且还得说明该产品在制造过程中的阶段。也就是BOM必须从制造层次来界定产品，每一个层次分别代表制程中的一个步骤的完成，而每一个存货项目，都在BOM的上下个层中有进库和出库的动作。

BOM必须避免含义不清。

作业的单元性是关键。装配一批组建后，装配件自成独立，是一个完整的单元，被送至库存或下一个工作站，则该项装配件便定义一个料号的必要。如果不定义料号，则MRP将无法为该项组建产生必要的订单。

Hadoop

本次设计是基于Hadoop的生产管理系统，所以在此有必要对Hadoop进行简要介绍。

Hadoop是一个分布式系统基础架构，由Apache基金会开发。用户可以在不了解分布式底层细节的情况下，开发分布式程序。充分利用集群的威力高速运算和存储。Hadoop实现了一个分布式文件系统（Hadoop Distributed File System），简称HDFS。HDFS有着高容错性的特点，并且设计用来部署在低廉的硬件上。而且它提供高传输率来访问应用程序的数据，适合那些有着超大数据集的应用程序。HDFS放宽了POSIX的要求这样可以流的形式访问文件系统中的数据。

Hadoop 是一个能够对大量数据进行分布式处理的软件框架。但是 Hadoop 是以一种可靠、高效、可伸缩的方式进行处理的。Hadoop 是可靠的，因为它假设计算元素和存储会失败，因此它维护多个工作数据副本，确保能够针对失败的节点重新分布处理。Hadoop 是高效的，因为它以并行的方式工作，通过并行处理加快处理速度。Hadoop 还是可伸缩的，能够处理 PB 级数据。此外，Hadoop 依赖于社区服务器，因此它的成本比较低，任何人都可以使用。

Hadoop是一个能够让用户轻松架构和使用的分布式计算平台。用户可以轻松地在Hadoop上开发和运行处理海量数据的应用程序。它主要有以下几个优点：

高可靠性。Hadoop按位存储和处理数据的能力值得人们信赖。

高扩展性。Hadoop是在可用的计算机集簇间分配数据并完成计算任务的，这些集簇可以方便地扩展到数以千计的节点中。

高效性。Hadoop能够在节点之间动态地移动数据，并保证各个节点的动态平衡，因此处理速度非常快。

高容错性。Hadoop能够自动保存数据的多个副本，并且能够自动将失败的任务重新分配。

Hadoop是Apache组织下的一个开源项目，致力于开发一套分布式计算环境下的可靠、可扩展软件。其中包括的子项目有： 

Hadoop Core, 提供了一套分布式文件系统以及支持Map-Reduce的计算框架。 

HBase，建立于 Hadoop Core之上提供一个可扩展的数据库系统。 

Pig，建立于 Hadoop Core之上为并行计算环境提供了一套数据工作流语言和执行框架。
 
ZooKeeper，高可用的和可靠的分布式协同（coordination）系统。分布式应用可以使用ZooKeeper存取其关键状态。

技术路线

本次设计的ERP生产管理系统中主要包括三大模块：计划管理模块、车间管理模块和产品结构管理模块，这些是一个生产管理系统的核心模块。并且本生产管理系统是基于云平台、基于Hadoop的，则要以Web的形式像用户提供服务，并且采用按需付费的收费方式。由于生产管理是一个及其复杂的过程，本系统在保证主要功能实现的同时，会对一些复杂情况进行简化。

整体模块架构构思如图所示。

本次系统设计由于是基于Hadoop的，由于Hadoop带有用 Java 语言编写的框架，因此运行在 Linux 系统上是非常理想的，并且在Linux系统中有较好的稳定性，所以本次课程设计完全在Linux平台下进行开发，选用比较主流的Linux操作系统Fedora17。Linux是一种自由和开放源码的类Unix操作系统，存在着许多不同的Linux版本，但它们都使用了Linux内核。Linux可安装在各种计算机硬件设备中，比如手机、平板电脑、路由器、视频游戏控制台、台式计算机、大型机和超级计算机。Linux是一个领先的操作系统，世界上运算最快的10台超级计算机运行的都是Linux操作系统。

由于Hadoop是Java语言编写的框架，所以本次系统开发的主要编程语言选用Java是在合适不过的，配合上Java Web、J2EE SSH框架进行Web应用程序的开发。SSH为struts+spring+hibernate的一个集成框架，是目前较流行的一种Java Web应用程序开源框架。集成SSH框架的系统从职责上分为四层：表示层、业务逻辑层、数据持久层和域模块层，以帮助开发人员在短期内搭建结构清晰、可复用性好、维护方便的Web应用程序。Struts作为系统的整体基础架构，负责MVC的分离；利用Hibernate框架对持久层提供支持；业务层用Spring支持。

集成开发环境（IDE）采用eclipse，由于要采用SSH框架和Hadoop，还要搭配tomcat和Hadoop插件以及SSH框架中的jar包。Eclipse是一个开放源代码的、基于Java的可扩展开发平台。本次设计使用Eclipse J2EE版本。

图是本次系统图形界面的初步设计。采用Web开发中主流的CSS+DIV布局，上方为系统的导航栏，放置系统各个功能模块的选择菜单。下方为各个菜单的显示界面，可以显示生产管理系统中的各个模块的数据。用户可以在界面上进行数据输入，数据将经校验后保存到数据库并进行数据处理，得到结果，并写入相关联的表中，这个过程对用户来说是透明的。

接下来对各个功能模块及之间的内在关联进行详细说明，生产管理系统内部的各个模块并非独立分离的，而是有很强的逻辑业务关联，这也是本次系统设计的难点之一。

基本功能模块中将实现计费和管理用户权限功能。云平台的一个重要特点就是按需付费，当账户中余额不足或是使用期限到期时，则该用户无法继续使用该系统。权限功能分为2级权限管理。1及权限为公司权限，即预付费的公司才能获得本套系统的使用权限。2级权限为公司内部不同操作人员的权限，比如：系统管理员拥有系统的最高权限，可以执行一切操作；而各个部门的工作人员只能使用该部门特定的功能，而其他部门的功能不允许使用。

计划管理模块。

车间管理模块。

产品结构模块。


进度安排

参考文献

