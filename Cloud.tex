\chapter{云计算概述}

云计算，作为长期以来梦寐以求的计算方法，有使IT行业发生巨大改变的潜力，使软件作为一种服务更加具有吸引力，并塑造了IT硬件的设计和购买方式。对新互联网服务有创新灵感的开发者不再需要在硬件上花费大量资金来部署他们的服务，或在运作上花费大量的人力成本。他们不需要担心在服务的流行程度低于预期的情况下，进行了过多的准备，浪费了昂贵的资源；或者是当服务非常流行时，准备不足，造成潜在客户和收入流失。更重要的是，需要处理大数据的公司能尽快得到处理结果，就像程序能自动调整一样，因为1000台服务器运行1小时的开销不多于1台服务器运行1000小时的开销。不需要额外开销就能获得更大的规模，这样的资源弹性在IT行业中是史无前例的。

因此，云计算在博客和官方报道中是一个非常热门的话题，并且出现在研讨会、会议甚至是杂志的标题之中。然而，人们对云计算到底是什么和在什么情况下能发挥作用仍存在很大的困惑，因为Oracle的CEO Larry Ellison沮丧地说过：“云计算的有趣之处在于我们重新定义了云计算，使它包含了一切……我不明白除了改变了一些广告用语之外，我们用云计算做了些什么不同的事。”

本文的目的是解释一些术语，提供简单图表定量地比较云计算和传统的计算，以及鉴别云计算在技术和非技术方面上的挑战和机遇，通过这些减少人们对云计算的困惑。

\section{定义云算}

云计算涉及互联网服务应用和提供这些服务的数据中心的硬件和系统软件两个方面。这些服务就事是人们所熟知的软件即服务（SaaS，Software as a Service）。一些厂商使用术语，比如设施即服务（IaaS，Infrastructure as a Service）和平台即服务（PaaS，Platform as a Service）来描述他们的产品，但我们避开这些定义还存在很大分歧的话题。“低层次”的设施和“高层次”的平台之间的界线划分已经不是什么新鲜话题。我们相信这两者是相似的，而不是不同的，并且我们把他们当作一个整体进行考虑。相似地，来自高性能计算社区的相关术语“网格计算”，提倡提供共享计算和远距离存储的协议，但这些仅在它的社区范围内有效。

数据中心的硬件和软件就是我们所说的云。当云以即用即付费的方式面向普通大众时，我们称它公共云；所出售的服务是效用计算。而私有云指那些不向普通大众开放的企业或组织内部的数据中心，同时这些数据中心必须有足够大的规模，使企业或组织能从我们这里讨论的云计算的优势中获利。这样，云计算是软件服务和效用计算的结合，但并不包括那些中小型的数据中心，即使他们依赖虚拟化管理。人们可能是软件服务的用户或提供商，或效用计算的用户或提供商。我们主要关注和软件用户相比不那么引人注目的软件服务提供商（即云用户）和云提供商。图\ref{Figure1-1}清楚的表示了提供商和用户之间的关系。在某些情况下，一个人可以扮演多个角色，一个云服务提供商在云设备中也可能拥有它自己的面向客户的服务。

\ECUSTfigure{LiteratureTranslationFigures/Cloud/Figure1-1.png}{云用户和云提供商}{Figure1-1}

从硬件准备和价钱的角度来看，云计算有三个新的特点。
\begin{itemize}
\item在需要的时候能提供无限的计算资源，能快速应对负荷冲击，因此消除云计算用户需要计划长远和事先准备的忧虑。
\item云用户不必交纳预付费用，因此允许公司从小开始，并且只有在需求快速增长时才增加硬件资源。
\item短期内，能够按照云计算资源的使用需求进行付费（例如：处理器按小时计费，存储容量按天计费），并且当在需要的时候释放这些资源，因此能够通过释放不再需要的机器和存储空间达到节约资源的目的。
\end{itemize}

我们证明极大规模的、商用电脑计算中心建设和运作在低成本的地点是云计算的关键、必须的要素，这在很大程度上减少了5到7倍在电力、网络、带宽、运作、软件和硬件上的成本。这些因素，结合用来增加利用率的统计复用，意味着和传统的数据中心相比，云计算能提供成本低于中型数据中心的服务，并且还能带来不错的利润。

我们提出的定义让我们能够清楚地认识某些例子是属于云计算还是非云计算。一个托管在因特网服务提供商的面向公众的因特网服务，需要为服务分配更多机器时需要4个小时的时间。但在公共因特网上的负荷冲击发生的更加迅速（Animoto的负载连续了3天每12小时翻一倍），所以这不是云计算。相反地，一个内部的企业数据中心，它的应用只有在显著提前通知管理员时才被修改。在这种情况下，分钟级的大规模的负荷冲击不太可能发生，这种情况符合作为云计算的必要条件之一。但这个企业的数据中心可能仍然不满足作为云的其他条件，比如无限的资源或者细粒度的账单。一个私有的数据中心可能也不能从使公共云在财务方面具有吸引力的经济规模中获利。

忽略私有云导致了博客中相当多的争论。我们相信当中型数据中心也声称有公有云的优势时，将会产生Larry Ellision的引用所表达的困惑和怀疑。除了拥有成百上千台机器的极大的数据中心，例如像Google和Microsoft运营的数据中心，大多数的数据中心只享用了部分公有云的潜在优势，如图\ref{Figure1-2}所示。因此我们相信将传统的数据中心包括在云计算的定义范围内将导致夸大小型的、所谓的私有云，这也是我们不把它们包含在内的原因。然而，在这我们描述了所谓的私有云如何通过超负荷计算或是混合云计算获得更多公有云的利益。

\ECUSTfigure{LiteratureTranslationFigures/Cloud/Figure1-2.png}{公有云和私有数据中心对比}{Figure1-2}

\section{效用计算分类}

任何应用都需要计算模型、存储模型和交互模型。统计复用必须要实现弹性和根据需要自动分配和管理无限的容量的功能。实践中，这些通过虚拟化实现。我们的观点是不同的效用计算服务将基于不同的云系统软件的抽象层次和资源的管理层次进行区分。

Amazon的EC2在这个范围的一端。一个EC2实例看起来很像一个物理硬件，且从内核启动后，用户可以控制几乎整个软件栈。这种低层次使Amazon难以提供自动化的可伸缩性和失效备援，因为和响应以及其他状态管理问题有关的语义很大程度上是应用相关的。在这个范围的另一极端，是像Google的AppEngine一样的应用领域特定平台，专门针对传统的网页应用，迫使应用的架构清楚地分离无状态的计算层和有状态的存储层。AppEngine令人印象深刻自动调整和高可用性的机制，和AppEngine应用可用的专有大数据存储都依赖于这些约束。Microsoft的Azure应用是用.Net库编写，并编译成一个语言相关的管理环境—公共语言运行库。这个框架明显地比AppEngine的更灵活，但仍然在存储模式和应用架构方面限制了用户的选择。因此，Azure是处于像AppEngine的应用框架和像EC2这样的硬件虚拟机之间的位置。

\section{云计算经济学}

我们来看三个特别地引人关注的，相比传统主机更青睐效用计算的用例。第一个例子是在需要的服务随时间而改变的情况下。比如，为高峰负荷准备一个数据中心，这必然能够承受每月那么几天的高峰，然后却也导致在其他时间得不到充分利用。取而代之，云计算让一个组织按小时支付使用的计算资源，这样能有效地节约成本，即使从云提供商那租用的机器每小时的费用比购买一台机器贵。第二个例子是在需求不明的情况下。比如：一个刚搭设的网站当它变得流行起来时，也潜在伴随着访客离开减少的可能性，这时它需要能支撑高峰。最后，进行批量分析的组织能够使用云计算的成本关联性更快地完成计算：使用1000台EC2的机器一小时的开销和使用1台机器1000小时的开销一样。

虽然云计算在经济上的吸引力经常被描述为“将资金开销转变为运营开销”（CapEx to OpEx，converting capital expenses to operating expenses），但我们相信“即用即付费”更加直接地抓住了买家的经济效益。通过云计算购买的小时数能按时间上非均匀的方式分配（例如，今天使用100小时而明天不使用，则只需支付100小时的费用）；在网络社区中，这种销售带宽的方式是已被熟知的基于流量的定价。除此之外，消除了预付资金开销能让资金被重新被使用在核心业务的投资上。

因此，即使在相同时期，Amazon的即用即付费定价比购买和贬值一台类似的服务器贵，我们认为极端重要的云计算的弹性和风险转移带来的经济效益，尤其是过度准备（未充分使用）和准备不足（达到饱和）的风险，比成本更加重要。

我们从弹性开始说起。主要观察到云计算能以良好的粒度增加或移除资源的能力（EC2每次一台服务器）和分钟级的交付周期而不是星期级能让资源和工作量匹配地更加接近。世界上数据中心的服务器的平均利用率从5\%到20\%。这听起来低得令人吃惊，但符合许多服务的工作高峰超过了平均值2到10倍的观测。因为几乎没有用户故意做少于预期峰值的准备，资源在非高峰时段处于闲散状态。变化越显著，浪费就越多。

例如，图\ref{Figure3-1}（a）假设我们的服务有在中午的峰值时需要500台服务器的预测需求，但是在半夜的波谷时只需要100台服务器。只要一整天的平均利用率是300台服务器，每天实际的成本（在这个曲线之下）是300$\times$24=7,200服务器小时；但是因为我们必须为峰值准备500台服务器，我们支付1.7倍的费用500$\times$24=12,000服务器小时。因此，只要即用即付费每服务器小时的花费在三年内（典型的折旧时间）少于1.7倍的购买服务器的费用，那么效用计算就相比之下较便宜。

实际上，这个例子低估了弹性带来的效益，因为在除了简单的每日模型之外，大多数服务也经历过季节性的或其他周期性的需求变化（例如：电子商务在12月份和照片分享网站在假期后访问量急剧上升），还有一些因为外部事件的不可预期的需求爆发（例如：新闻事件）。因为可能要花上几周的时间来获得和布置新设备，所以你必须为这些峰值事先做准备。我们已经看见即使服务运营商正确地预测了峰值的规模，但资源却被浪费了，并且如果他们的准备低估了峰值，那可能会更糟。

他们可能也会低估如图\ref{Figure3-1}（b）所示的峰值，这会意想不到地使过量用户离开。过度准备的开销容易衡量，而准备不足的开销却难以衡量，且有同样的潜在严重性：不仅拒绝用户不产生收入，并且这些用户可能永远流失了。例如：Friendster的流行度相对竞争对手Facebook和MySpace有所下滑，部分原因归咎于用户对缓慢的响应时间（最多40秒）的不满。图\ref{Figure3-1}（c）旨在捕获这种行为：用户会抛弃一个准备不足的服务直到高峰用户负载等于数据中心正常的负载能力，这时用户才能获得能够接受的服务质量。

为了简化这个例子，假设一个虚拟的网站的用户可分为两类：活跃用户（经常访问该网站的）和流失用户（抛弃了这个网站或由于网站差劲的表现离开的）。进一步假设10\%的活跃用户在获得由于准备不足导致的差劲服务后永远流失了（成为流失用户），这样，留下来的常规用户就会获得更好的体验。这个网站起初准备应对400,000用户的预期峰值（每台服务器应对1000用户$\times$400台服务器），但意料之外的正面报道在第一个小时内带来500,000的用户访问量。在100,000位离开或获得差劲服务的用户里，根据我们的假设他们当中的10,000位永远流失了，留下了390,000位活跃用户。接下来的一小时中又有250,000位新用户访问。起初的10,000位用户获得了良好服务，但是仍然有240,000位用户超出了网站的容量。这导致增加了24,000位流失用户，剩下376,000的固定用户。如果这个模式持续下去，在lg(500,000)或19小时之后，新用户的数量将接近0，并且网站的容量将达到稳定。显然，在这19小时中，网站运营商获取了少于与400,000用户等值的稳定收入，而这再次说明了不足之处，更不用说不满用户留下的坏名声。

这些情况真的会发生在实践之中吗？当Animoto通过Facebook提供服务时，它遭受了导致在3天之内从50台服务器增长到3500台服务器的需求冲击。即使每台服务器的平均利用率低，没人可以预见对资源的需求会突然连续三天每12小时翻倍。在高峰之后，通信量下降到一个较低的水平。所以在这个真实的案例中，可调整的弹性不是成本优化，而是一个运作要求，并且可下调减少的弹性能允许在稳定状态时的开销更加接近符合稳定状态的工作量。

\ECUSTfigure[scale=0.8]{LiteratureTranslationFigures/Cloud/Figure3-1.png}{}{Figure3-1}

\section{云计算的10个障碍和机会}

图\ref{Figure4-1}总结了阻碍云计算发展的决定性的障碍的排名列表。前三个影响应用，后五个影响增长，最后的两个是政策和商业障碍。每个障碍都伴随着一个克服障碍的机会，包括从产品发展到研究项目。

\ECUSTfigure{LiteratureTranslationFigures/Cloud/Figure4-1.png}{云计算的机会和阻碍}{Figure4-1}

\subsection{商业持续性和服务可用性}

一些组织担心效用计算是否有足够的可用性,这造成了一些对云计算的警觉。讽刺的是，现有的软件服务产品在这点上设立了一个很高的高标准。Google搜索以高可用性著称，在这点上甚至一个小小的崩溃都会被主要新闻媒体争相报道。

用户期望新服务能有相似的可用性，但这很困难。图\ref{Figure4-2}展示了Amazon简单存储服务（S3，Simple Storage Service），AppEngine和Gmail在2008年的服务中断记录。即使这些中断造成了负面的影响，但几乎没有企业的IT设施像他们这么好。除了可用性的技术问题，云提供商可能因非技术问题遭受服务中断，包括停业或者成为调控活动的目标（后者最近的一个例子发生在去年，我们稍后会描述）。

云提供商能提供专门的硬件和软件技术来提供更高的稳定性，但他们却没这么做，大概是因为价钱太高。这样的稳定性之后可以作为服务水平协议出售给用户。但是这种方法只能这样。高可用性计算社区已经长时间保持了“不败记录”的美誉，然而单一公司管理云计算服务就是一个失败。即使公司在不同地理地区拥有多个数据中心，并使用不同的网络提供商，但仍然会有常见的软件设施和会计系统，或者公司甚至停业。在这种情况下没有商业可持续性战略，使大量的客户不愿意迁移到云计算。我们相信独立软件栈最好的机会就是由不同的公司提供，因为一家公司很难以可靠性的名义来建设和维护两个栈。就像大型因特网提供商用多个网络提供服务，这样一家公司的失败不会使他们全部下台，我们相信要达到高稳定性，唯一合理的解决方案就是多个云服务商。

\ECUSTfigure{LiteratureTranslationFigures/Cloud/Figure4-2.png}{AWS、AppEngine和Gmail服务器崩溃情况}{Figure4-2}

\subsection{数据锁存}

软件栈改进了平台之间协同工作的能力，但是云计算的存储API本质上还是专用的，还不是标准化的。因此，客户不能轻易地从一个网站中提取出它们的数据和程序然后在另一个上运行。从云中提取出数据的难度阻碍了一些组织采用云计算。客户锁存可能对云提供商来说有吸引力，但他们的用户却易受提价、可靠性问题、甚至提供商停业的危害。

例如：2008年8月8日，一个叫作Linkup的在线存储服务在丢失了45\%的用户数据后宣告倒闭。Linkup反过来依赖在线存储服务Nirvanix来存储客户数据，两个组织之间的争端导致了客户数据的丢失。同时，20,000位Linkup的用户被告知服务不再可用并催促他们尝试其它的存储网站。

一种解决方案是API标准化，通过这种方式软件服务开发者就能够把他们的服务和数据部署在多个云计算提供商上，这样一家公司的失败不会造成所有用户数据拷贝的丢失。可能有人会担心这会引发云服务的价格战，比且减少云计算提供商的利润。我们
提供两个论据来缓和这种恐惧。

首先，服务质量和价钱一样重要，所以顾客可能不会选择价格最低的服务。所以今天的一些因特网提供商的费用是其他提供商的10倍，因为他们更加可靠，且提供额外的服务来提高可用性。

其次，除了缓解数据锁存的顾虑，标准化API能带来新的使用模式，相同的软件设施既能在内部数据中心，也能在公共云上被使用。这样的选择性能使公共云用于捕获那些由暂时的高负载引起的，不能轻易在数据中心（私有云）中运行的额外任务，从而实现混合云计算或者超负荷云计算。这种选择性可以显著地扩大云计算的市场。确实，专用云的API实现开源，例如Eucalyptus和HyperTable，是实现超负荷计算的第一步。

\subsection{数据保密/可审计性}

尽管大多数公司薪酬外包，且很多公司使用内部邮箱来保存敏感信息，但安全问题是一个最经常被引用来反对云计算的话题。分析师和持怀疑态度的公司问道：“谁会信任把他们的重要数据放在外面？”并且还需要可审计，从健康和人类服务萨班斯-奥克斯利法案和健康保险流通与责任法案规定的意思上看，必须为企业提供将数据迁移到云的服务。

云用户面对着来自云外部和云内部的危险。大多数安全问题都涉及到保护云免受那些大型数据中心同样要面对的相似的外部威胁。然而在云中，可能很多的群体都要承担这项责任，包括用户的安全敏感的软件或配置所依赖的云用户，云提供商和任何的第三方提供商。

用云户需要承担应用层的安全。云提供商需要承担物理层的安全，且可能需要执行外部防火墙的措施。软件栈中间层的安全问题由用户和运营商共同承担；越低层次的抽象向用户公开，则用户需要越多的责任。Amazon的EC2的用户比Azure用户需要承担更多的安全技术责任，而Azure的用户又需要比AppEngine承担更多的责任。而这些用户的责任可以外包给销售特定的安全服务的第三方公司。像EC2这样的平台的一致性和标准化接口使一家公司提供配置管理或防火墙规则分析作为增值服务成为可能。

在云计算可能比较轻易地解决外部面临的安全问题的同时，它又产生了内部安全的新问题。云提供商必须防止由用户造成的盗窃或是拒绝服务攻击。用户需要彼此防范。

目前云计算的主要安全机制是虚拟化。它是一个强力的防御措施，能防止大多数用户之间的相互攻击或是用户攻击云设备。然而，不是所有资源都被虚拟化，且不是所有虚拟化环境都是无漏洞的。虚拟化软件包含着可能使虚拟化代码在某些情况下崩溃的漏洞。不正确的网络虚拟化可能使用户代码访问提供商设施的敏感部分，或者其他用户资源。这些挑战虽然都和管理大型非云的数据中心碰到的挑战相识，不同的应用需要彼此防范。任何的大型因特网服务需要确保一个安全漏洞不会危害其余的全部。

最后一个安全顾虑是防止提供商侵犯用户的权益。提供商肯定控制着软件栈的底层，这有效地绕开大多数已知的安全问题。如果缺少基本的安全技术改进，我们期望用户使用合同和法庭，而不是聪明的安全引擎来制止提供商的不正当行为。一个重要的例外是不小心造成的数据丢失的风险。难以想象Amazon监控着虚拟机内存中的内容；可以想象未经格式化就抛弃一个硬盘，或是一个许可漏洞使数据不正确地显示。
这是一个非云环境中也存在的问题。标准的防护措施，如用户层加密，在云中也是有效的。这对于云之外的高价值数据已经是非常常见的了，并且已经有可用的工具和专门技术。这种方法已经被TC3，一家能访问敏感病人的病例和医疗索赔的健康保健公
司，在转移他们符合HIPAA法案的应用到AWS时成功运用。

相似地，审计性可以作为虚拟访客系统接触不到的额外的层加入，提供设备比那些内置和集中软件保密性和设计性相关的责任到单一的逻辑层的应用更加安全。这样提供一个了云计算从特定硬件变到虚拟化能力的新特色。

\subsection{数据传输瓶颈}

应用不断变得数据密集。如果我们假设应用可能被跨边界的云“撕开”,这可能使数据的布置和传输复杂化。以$100到$150每TB的传输价格，开销会急速飙升，这使得数据传输成本成为一个重要的问题。云用户和云提供商如果想使成本最小化，就必须考虑安置和交通在系统每一级的含义。Amazon发展新的服务CloudFont证明了这种推理。

克服因特网传输的高费用的一个机会是用船运输磁盘。Jim Gray发现传送大量数据最便宜的方法就是用船运输磁盘，甚至整台电脑。虽然这不适用于所有情况，但却可以有效处理大量不紧急的点对点传输的情况，例如导入大量数据集合。

为了定量分析这个论据，假设我们想要从U.C.Berkeley到华盛顿Seattle的Amazon用船运输10TB的数据。 Garfinkel测量从三个网站到S3带宽，并统计平均写带宽为5Mbits/s到18Mbits/s。假设我们有20Mbits/s的WAN链接。那将花费\\
10*1012比特/(20$\times$106位/秒)=(8$\times$1013)/(2$\times$107)秒=4,000,000秒，\\
这超过了45天。但如果我们通宵用船运输10个1TB的磁盘，那么将花费少于1天的时间来传输10TB，相当于1500Mbit/s的有效带宽。例如，AWS最近开始提供这样的服务，叫作导入/导出。

\subsection{性能不确定性}

我们的经验表明多个虚拟机在云计算共享CPU和主存的效果出奇地好，但网络和磁盘输入$\backslash$输出的共享就相当有问题。结果导致不同的EC2实例在它们的输入输出的性能与主存的性能相比有很大的不同。我们通过运行STREAM内存基准来测量75台EC2实例。平均带宽为1,355Mbytes/s，标准差为52MBytes/s，少于或在平均值的4\%左右。我们也通过让每台EC2实例写1GB的文件到本地磁盘来测量75台实例的平均磁盘带宽。平均磁盘写带宽在55Mbytes每秒左右，标准差为9MBytes/s多一点，或者是平均值的16\%左右。这证明了两台虚拟机之间输入输出干扰的问题。

机会之一是改进架构和操作系统来高效地虚拟化中断和输入输出通道。注意到IBM主机和操作系统在20世纪80年代时就很大程度上克服了这些问题，所以我们有成功的先例可以借鉴。

另一个可能性是闪存能减少输入$\backslash$输出的干扰。闪存是断电后仍能保存信息的半导体存储器，类似于机械的硬盘，但由于没有移动的部分，它能更快的读写（微秒vs.毫秒）和消耗更少的电能。闪存比硬盘每秒每GB能承受更多的输出输出存储，所以有冲突输入输出工作流的多台虚拟机能够在同一台电脑中更好的共存，而不会产生机械硬盘带来的干扰。

另一个意料之外的阻碍是担心虚拟机某类批处理程序的计划表，尤其是高性能计算的计划表。考虑到高性能计算(HPC,High-Performance Computing)过去常被政府采购。政府花费\$100M购买10,000到1,000,000个处理器的超级电脑中心，有很多需要并行处理的任务可以从弹性的计算中获益。今天，许多这些任务在小集群中进行，这通常是低利用率的。取而代之，将这些任务运行在云中的大集群里可能是一个很大的节约。开销关联性意味着使用20次，每次使用1/20的计算量将不会有惩罚。潜在应用可从中获利，包括那些有很高的潜在经济回报的应用—财务分析、石油勘测、电影特效—甚至愿意花费额外费用换取20倍的速度。

有吸引力的高性能计算的障碍不是集群的使用；现在多数并行计算在大的集群中通过信息传输接口MPI完成。问题在于很多高性能计算的应用需要确保一个程序的所有进程需要同时运行，且现在的虚拟机和操作系统并不提供程序员可见的方式来确保这一点。因此，克服这个障碍的机会是为云计算提供像“团队计划表”一样的东西。由于之前提到的性能不确定性，所以在云计算环境中实现在传统的团队计划表中相当紧密的同步协调 可能是很大的挑战。

\subsection{可扩充的存储}

先前，我们定义了使云计算具有吸引力的三个属性：短期使用（意味着当需求减少的时候能按比例减少，需求增加时也可以增加），无预付费用，和无限的容量需求。当这些应用到计算中意味着什么已经很清楚了，但如何将它应用在持续的存储上还不是非常清楚。

已经有很多回答此问题的尝试，包括丰富的查询和存储API，提供性能保证，以及结果一致性的语义学。机会在于创造一个不仅满足现有程序员在持久性、高可用性、管理能力和数据查询方面的期望的存储系统，并且要把它们与云计算能根据需求任意调整的优势相结合。

\subsection{大规模分布式系统的漏洞}

云计算困难的挑战之一在于去除超大规模分布式系统中的错误。一个通常的情况是这些漏洞不能在小规模的配置中再现，所以必须在生产的数据中心这样的规模下进行调试。

机会之一可能是云计算依赖虚拟机。很多传统的软件服务提供商不使用虚拟机来开发他们的设施，可能是因为他们在虚拟机流行之前就进行了开发，或是他们觉得无法承受虚拟机的性能开销。由于虚拟机是效用计算中所必须的，这种虚拟化层次使获取很多方面有价值的信息成为可能，离开虚拟机是无法完成的。

\subsection{快速调整}

即付即使用确实适用于存储和网络带宽，两者都按使用的比特量计费。而计算量根据虚拟化的层次，就稍有不同。Google的AppEngine响应负荷的增减，自动调整，并且用户按使用周期付费。AWS按所占用实例的数量和使用时间收费，即使你的机器是空闲的也需要交费。

机会在于响应负荷并自动地快速按比例增加和减少以节约成本，但不能违反服务水平协议。确实，加州大学伯克利分校可靠自适应分布系统实验室的关注点之一是普遍和积极地利用统计机器学习的诊断和测量工具来动态调整，自动处理性能和正确性问题，且自动管理该系统的其他方面。

调整的另一个原因是节约资源和成本。由于一台空闲的机器需要使用一台繁忙的机器所消耗电能的2/3，小心地使用资源能减少数据中心环境的影响，这目前受到很多负面的关注。云计算提供商已经执行了小心且低价的资源消耗计算，效用计算鼓励程序员关注性能（这样，只有在必要的时候释放和获得资源）,且提供更加直接的操作和开发无效性测量。

意识到成本问题是节约的第一步，但麻烦事容易让人将机器闲置一晚，这样第二天程序员来工作时开机时间是零。一个快速且易于使用的快照/重启工具会更加鼓励节约计算资源。
No.9 信誉共享
一个用户的坏行为能影响其他使用相同的云的用户的信誉。例如:EC2 的过滤垃圾邮件服务的IP地址的黑名单可能限制有效托管的应用。一个机会是发明信誉保护服务，这似于当下提供给托管在正经历这个问题的缩影的小型因特网提供商的服务的”信任邮件”服务（收费）。

另一个法律问题是法律责任的牵连问题—云计算提供商希望他们的顾客承担责任，而不是他们自己（例如发送垃圾邮件的公司将担负责任，而不是Amazon）。在2009年3月，FBI搜捕了Dallas的数据中心，原因是一个将服务器托管在此的公司因涉嫌犯罪活动被调查，但一些托管在相同地方的”无辜的旁观者“公司却遭受了几天意料之外的停工，并且有一些甚至停业倒闭。

\subsection{软件许可}

目前的软件许可通常是限定能运行该软件的电脑。用户购买软件然后支付一年的维护费用。确实，SAP宣布每年维护费用会至少增加22\%的软件购买费用，这比较接近Oracle的价位。因此，很多云计算提供商起初部分依赖开源软件，因为商用软件的许可模式不合适于效用计算。

主要的机会在于开源保持流行或是商业软件简单地改变它们的许可框架来更好地适应云计算。比如：Microsoft和Amazon现在在EC2上为Windows Server和Windows SQL Server提供即用即付费的软件许可方式。一台运行Microsoft Windows的EC2实例每小时花费\$0.15，而不是\$0.10每小时的开源替代软件。IBM也宣布对托管在EC2上的IBM软件采用即用即付费的定价政策，价格从DB2 Express的\$0.38每小时到Lotus的网页内容管理服务器IBM WebSphere的\$6.39每小时。

\section{总结}

我们预测了云计算将会增长，所以开发者们应该考虑它。不管一个云服务提供商是以像EC2这样的低层次抽象或是像AppEngine这样的高层次抽象销售服务，我们都相信计算能力、存储和网络必须都集中注意在虚拟资源的水平伸缩性，而不是单节点的性能。此外：
应用软件需要迅速地按比例增加和减少，这是一个新的需求。这样的软件还需要付费使用许可模式来适应云计算。
基础设施软件必须意识到它不再运行在裸机上了，而是在虚拟机上。此外，计量计费从一开始就需要内置。
硬件系统应被设计成一个容器的规模（至少10个台），这是最小的购买量。运行开销将和性能匹配且购买价格的重要性，通过将闲置的内存、磁盘和网络进入低功耗模式奖励能源比例。处理器应该能和虚拟机协同工作，且闪存应该被加入存储层次结构中，且LAN交换机和WAN路由必须提高带块和功耗。

\section*{致谢}
\addcontentsline{toc}{section}{致谢}

Google、Microsoft、Sun Microsystems、Amazon Web Services、Cisco Systems、Cloudera、eBay、Facebook、Fujitsu、Hewlett-Packard、Intel、Network Appliances、SAP、VMWare、Yahoo支持了一部分的研究。加州工业大学的配套资金/大学合作研究项目（UC Discovery）和国家科学基金给予的支持。
